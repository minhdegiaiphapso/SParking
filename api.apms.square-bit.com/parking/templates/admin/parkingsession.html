{% extends "admin/base.html" %}
{% block title %}
Tìm kiếm thông tin các lượt xe
{% endblock %}

{% block branding %}
<h1 id="site-name" xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html"
    xmlns="http://www.w3.org/1999/html">
</h1>
{% endblock %}

{% block extrahead %}
<!--custom view style-->
<link rel="stylesheet" type="text/css" href="/static/css/page.css"/>

<!--datetimepicker-->
<link rel="stylesheet" type="text/css" href="/static/css/jquery.datetimepicker.css"/>

<!--datatable-->
<link rel="stylesheet" href="/static/css/bootstrap.min.css">
<link rel="stylesheet" href="/static/css/jquery.dataTables.min.css"/>

{% endblock %}

{% block content %}
<div class="containerRPS">


    <form method="post" id="formRPS">
        {% csrf_token %}
        <div class="form-field">
            <label>Tên thẻ</label>

            <div>
                <input style="height: 30px; width: 150px;" type="text"
                       placeholder="Tên thẻ"
                       id="card_label" name="card_label" value="{{card_label}}"/>
            </div>
        </div>

        <div class="form-field">
            <label>Biển số</label>


            <div>
                <input style="height: 30px; width: 150px;" type="text"
                       placeholder="Biển số"
                       name="vehicle_number" value="{{vehicle_number}}"/>
            </div>
        </div>

        <div class="form-field">
            <label>Loại xe</label>
            <div>
            {% if vehicle_type_data %}
            <select name="vehicle_type" style="height: 30px; width: 150px;">
                {% for item in vehicle_type_data %}
                    {% if item.vehicle_id == vehicle_type %}
                    <option name="vehicle_type" value="{{item.vehicle_id}}" selected>{{item.vehicle_name}}</option>
                    {% else %}
                    <option name="vehicle_type" value="{{item.vehicle_id}}">{{item.vehicle_name}}</option>
                    {% endif %}
                {% endfor %}
            </select>
            {% endif %}
                </div>
        </div>

        <div class="form-field">
            <label>Trạng thái</label>
            <div>
            {% if vehicle_status_data %}
            <select name="vehicle_status" style="height: 30px; width: 150px;">
                {% for item in vehicle_status_data %}
                    {% if item.status == vehicle_status %}
                    <option name="vehicle_status" value="{{item.status}}" selected>{{item.status_name}}</option>
                    {% else %}
                    <option name="vehicle_status" value="{{item.status}}">{{item.status_name}}</option>
                    {% endif %}
                {% endfor %}
            </select>
            {% endif %}
            </div>
        </div>


        <div class="form-field">
            <label>Từ</label>

            <div>
                <input style="height: 30px; width: 150px;" type="text" value="{{from_time}}"
                       id="datetimepicker_start" name="from_time"/>
            </div>
        </div>

        <div class="form-field">
            <label>Đến</label>

            <div>
                <input style="height: 30px; width: 150px;" type="text"
                       value='{{to_time}}'
                       id="datetimepicker_end"
                       name="to_time"/>
            </div>
        </div>

        <div class="form-field">
            <label>&nbsp;</label> <br/>
            <button style="height: 30px; width: 150px;" class="form-field" type="submit" name="btn_SEARCH">
                Tìm kiếm
            </button>
        </div>
    </form>

    <br style="clear:both;"/>
    <hr/>
    <table id="datatable" style="width: 100%">
        <thead>
        <tr>
            <th>Tên thẻ</th>
            <th>Biển số</th>
            <th>Loại xe</th>
            <th>Thời gian vào</th>
            <th>Thời gian ra</th>
            <th>Ngoại lệ</th>
        </tr>
        </thead>
        <tbody>
        {% if data %}
        {% for item in data %}
        <tr>
            <td>{{ item.card_label }}</td>
            <td>{{ item.vehicle_number }}</td>
            <td>{{ item.vehicle_type }}</td>
            <td>{{ item.check_in_time }}</td>
            <td>{{ item.check_out_time}}</td>
            <td>{{ item.is_exception}}</td>
        </tr>
        {% endfor %}
        {% endif %}
        </tbody>
           </table>
</div>


<!--script for datimepicker-->
<script src="/static/jquery/jquery.js"></script>
<script src="/static/jquery/jquery.datetimepicker.js"></script>
<script>
    jQuery('#datetimepicker_start').datetimepicker({
        format:'d-m-Y H:i:s',
        timepicker:true,
        lang:'vi',
        i18n:{
            vi:{
                months:[
                    'Tháng Một','Tháng Hai','Tháng Ba','Tháng Tư',
                    'Tháng Năm','Tháng Sáu','Tháng Bảy','Tháng Tám',
                    'Tháng Chín','Tháng Mười','Tháng Mười Một','Tháng Mười Hai',
                    ],
                dayOfWeek:[
                    "Chủ Nhật", "Hai", "Ba", "Tư",
                    "Năm", "Sáu", "Bảy.",
                ]
            }
        },
        onShow:function( ct ){
            this.setOptions({
                maxDate:jQuery('#datetimepicker_end').val()?jQuery('#datetimepicker_end').val():false
            })
        }
    });
    jQuery('#datetimepicker_end').datetimepicker({
        format:'d-m-Y H:i:s',
        timepicker:true,
        lang:'vi',
        i18n:{
            vi:{
                months:[
                    'Tháng Một','Tháng Hai','Tháng Ba','Tháng Tư',
                    'Tháng Năm','Tháng Sáu','Tháng Bảy','Tháng Tám',
                    'Tháng Chín','Tháng Mười','Tháng Mười Một','Tháng Mười Hai',
                    ],
                dayOfWeek:[
                    "Chủ Nhật", "Hai", "Ba", "Tư",
                    "Năm", "Sáu", "Bảy.",
                ]
            }
        },
        onShow:function( ct ){
            this.setOptions({

            })
        }
    });


</script>

<!--script for sort-table-->
<script src="/static/jquery/jquery.js"></script>
<script src="/static/jquery/jquery.dataTables.min.js"></script>
<script>
    $(document).ready(function () {
        var table = $('#datatable').dataTable( {
            "order": [[3, "desc"]],
            "oLanguage": {
                "sProcessing":   "Đang xử lý...",
                "sLengthMenu":   "Xem _MENU_ mục",
                "sZeroRecords":  "Không tìm thấy dòng nào phù hợp",
                "sInfo":         "Đang xem _START_ đến _END_ trong tổng số _TOTAL_ mục",
                "sInfoEmpty":    "Đang xem 0 đến 0 trong tổng số 0 mục",
                "sInfoFiltered": "(được lọc từ _MAX_ mục)",
                "sInfoPostFix":  "",
                "sSearch":       "",
                "sUrl":          "",
                "oPaginate": {
                "sFirst":    "Đầu",
                 "sPrevious": "Trước",
                 "sNext":     "Sau",
                 "sLast":     "Cuối"
                 }
            }
        } );
    });


</script>

<link rel="stylesheet" href="/static/css/1.8.18/jquery-ui.css" type="text/css" media="all"/>
<script src="/static/jquery/jquery.min.js" type="text/javascript"></script>
<script src="/static/jquery/1.8.16/jquery-ui.min.js" type="text/javascript"></script>
<script>
    var $j = jQuery.noConflict();
    $j(function() {
        $j("#card_label").autocomplete({
            source: "/admin/get_card_labels",

            });
        });


</script>
<link rel="stylesheet" href="/static/css/page.css">
{% endblock %}
<!--minLength: 2-->