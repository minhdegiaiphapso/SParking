{% extends "admin/base.html" %}

{% block title %}
Thống kê lượng xe vào ra
{% endblock %}

{% block extrastyle %}
{% endblock %}

{% block branding %}
<h1 id="site-name" xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html"
    xmlns="http://www.w3.org/1999/html">{{title}}</h1>
{% endblock %}

{% block extrahead %}
<!--custom view style-->
<link rel="stylesheet" type="text/css" href="/static/css/page.css"/>
<script src="/static/js/tableToExcel.js"></script>
{% endblock %}

{% block content %}
<div class="containerRPS">
    <form method="post" id="formRPS">
        {% csrf_token %}
        <div>
            <div class="form-field">
                <label>Nhân viên</label>
                <div>
                    <input style="height: 30px; width: 200px;" type="text" name="txt_user" id="txt_user" value="{{fullname}}" placeholder="Tên nhân viên"/>
                </div>
            </div>
            <div class="form-field">
                <label>Máy trạm</label>
                <br/>
                <select style="height: 30px; width: 150px;" name="slt_terminal">
                    {% for item in terminal_data %}
                        {% if item.id == terminal %}
                        <option name="terminal_item" value="{{item.id}}" selected>{{item.name}}</option>
                        {% else %}
                        <option name="terminal_item" value="{{item.id}}">{{item.name}}</option>
                        {% endif %}
                    {% endfor %}
                </select>
            </div>
            <div class="form-field">
                <label>Thời gian bắt đầu</label>
                <div>
                    <input style="height: 30px; width: 150px;" type="text" value="{{time_in}}" id="datetimepicker_start" name="txt_in"/>
                </div>
            </div>
            <div class="form-field">
                <label>Thời gian kết thúc</label>
                <div>
                    <input style="height: 30px; width: 150px;" type="text" value="{{time_out}}" id="datetimepicker_end" name="txt_out"/>
                </div>
            </div>
            <div class="form-field">
                <label>&nbsp;</label> <br/>
                <button style="height: 30px; width: 150px;" type="submit" name="btn_submit">Thống kê</button>
            </div>
            <div class="form-field">
                <label>&nbsp;</label> <br/>
                <a id="dlink"  style="display:none;"></a>
                <input style="height: 30px; width: 150px;" type="button" onclick="tableToExcel('datatable', 'Thống kê', 'GP-Statistics.xls')" value="Xuất dữ liệu">
            </div>
        </div>
    </form>

    <hr/>
    <div>
        <table id="datatable" style="width: 100%">
            <thead>
                <tr>
                    <th rowspan="2">Loại phương tiện</th>
                    {% for item in head %}
                        <th colspan="3">{{item}}</th>
                    {% endfor %}
                </tr>
                <tr>
                    {% for item in head %}
                        <th data-sort="int">Xe vào</th>
                        <th data-sort="int">Xe ra</th>
                        <th data-sort="int">Còn lại</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for item in data %}
                    <tr>
                        <td>{{item.name}}</td>
                        {% for ite in item.data %}
                            <td  class="data-cell">{{ite}}</td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<!--style datetimepicker-->
<link rel="stylesheet" type="text/css" href="/static/css/jquery.datetimepicker.css"/>
<link rel="stylesheet" href="/static/css/bootstrap.min.css">
<link rel="stylesheet" href="/static/css/bootstrap-theme.min.css">
<link rel="stylesheet" href="/static/css/page.css">

<script src="/static/jquery/jquery.js"></script>
<script src="/static/jquery/jquery.datetimepicker.js"></script>
<script>
    jQuery('#datetimepicker_start').datetimepicker({
        format:'d-m-Y H:i:s',
        lang:'vi',
        i18n:{
            vi:{
                months:[
                    'Tháng Một','Tháng Hai','Tháng Ba','Tháng Tư',
                    'Tháng Năm','Tháng Sáu','Tháng Bảy','Tháng Tám',
                    'Tháng Chín','Tháng Mười','Tháng Mười Một','Tháng Mười Hai',
                    ],
                dayOfWeek:[
                    "Chủ Nhật", "Hai", "Ba", "Tư",
                    "Năm", "Sáu", "Bảy.",
                ]
            }
        },
        onShow:function( ct ){
            this.setOptions({
                maxDate:jQuery('#datetimepicker_end').val()?jQuery('#datetimepicker_end').val():false
            })
        }
    });
    jQuery('#datetimepicker_end').datetimepicker({
        format:'d-m-Y H:i:s',
        lang:'vi',
        i18n:{
            vi:{
                months:[
                    'Tháng Một','Tháng Hai','Tháng Ba','Tháng Tư',
                    'Tháng Năm','Tháng Sáu','Tháng Bảy','Tháng Tám',
                    'Tháng Chín','Tháng Mười','Tháng Mười Một','Tháng Mười Hai',
                    ],
                dayOfWeek:[
                    "Chủ Nhật", "Hai", "Ba", "Tư",
                    "Năm", "Sáu", "Bảy.",
                ]
            }
        },
        onShow:function( ct ){
            this.setOptions({

            })
        }
    });
</script>

<script src="https://code.jquery.com/jquery.js"></script>
<script type="text/javascript" src="/static/js/stupidtable.min.js"></script>
<script>
    $(document).ready(function () {
    $("#datatable").stupidtable();
});
</script>

<link rel="stylesheet" href="/static/css/1.8.18/jquery-ui.css" type="text/css" media="all"/>
<script src="/static/jquery/jquery.min.js" type="text/javascript"></script>
<script src="/static/jquery/1.8.16/jquery-ui.min.js" type="text/javascript"></script>
<script>
    var $j = jQuery.noConflict();
    $j(function() {
        $j("#txt_user").autocomplete({
            source: "/admin/get_users",
            minLength: 2
            });
        });
</script>
{% endblock %}