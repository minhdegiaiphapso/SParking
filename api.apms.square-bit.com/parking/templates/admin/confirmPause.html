{% extends "admin/base.html" %}
{% block title %}
Xác nhận tạm ngừng vé tháng
{% endblock %}

{% block branding %}
<h1 id="site-name" xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html"
    xmlns="http://www.w3.org/1999/html">
</h1>
{% endblock %}

{% block extrahead %}
<!--custom view style-->
<link rel="stylesheet" type="text/css" href="/static/css/page.css"/>

<!--datetimepicker-->
<link rel="stylesheet" type="text/css" href="/static/css/jquery.datetimepicker.css"/>

<!--datatable-->
<link rel="stylesheet" href="/static/css/bootstrap.min.css">
<link rel="stylesheet" href="/static/css/jquery.dataTables.min.css"/>

{% endblock %}

{% block content %}
<div class="containerRPS">
    <form action="/admin/ConfirmPause/" method="post">
    {% csrf_token %}
    <h2>Tạm ngừng vé tháng xe khách hàng</h2>

    <div style="float:left;margin-left: auto;margin-right: auto;width: 95%;">
    <textarea name="notes" rows="5" style="width: 100%;height:100%;" placeholder="Nhập lí do tạm ngưng"></textarea>
    </div>

    <br style="clear: both" />
    <p><b>Hôm nay: {{ today }}</b></p>

        <div style="float:left;margin-left: auto;margin-right: auto;width: 95%;">
    <table id="datatable">
        <thead>
            <tr>
                <th>Mã xe</th>
                <th>Số xe</th>
                <th>Tên thẻ</th>
                <th>Khách hàng</th>
                <th>Lái xe</th>
                <th>Tình trạng</th>
                <th>Ngày Ngày đăng ký</th>
                <th>Hạn hiện tại</th>
                <th>Thời gian còn lại</th>
            </tr>
        </thead>
        <tbody>
            {% if data %}
                {% for item in data %}
                    {% if item.cannot_pause %}
                    <tr style="color:red" >
                        <td>{{ item.vehicle_registration_id }}</td>
                        <td>{{ item.vehicle_number }}</td>
                        <td>{{ item.card_label }}</td>
                        <td>{{ item.customer_name }}</td>
                        <td>{{ item.vehicle_driver_name }}</td>
                        <td>{{ item.status }}</td>
                        <td>{{ item.last_renewal_effective_date }}</td>
                        <td>{{ item.expired_date }}</td>
                        <td>{{ item.remain_duration }}</td>
                    </tr>
                    {% else %}
                    <tr>
                        <td>{{ item.vehicle_registration_id }}</td>
                        <td>{{ item.vehicle_number }}</td>
                        <td>{{ item.card_label }}</td>
                        <td>{{ item.customer_name }}</td>
                        <td>{{ item.vehicle_driver_name }}</td>
                        <td>{{ item.status }}</td>
                        <td>{{ item.last_renewal_effective_date }}</td>
                        <td>{{ item.expired_date }}</td>
                        <td>{{ item.remain_duration }}</td>
                    </tr>
                    {% endif %}
                {% endfor %}
            {% endif %}
        </tbody>
    </table>
            </div>
    <br />
    <br />

         <!-- Meo: luu giu chuoi cac parkingsession id duoc chon -->
        <textarea type="hidden" name="selected" style="display:none;" >{{ selected }}</textarea>
        <textarea type="hidden" name="customer_id" style="display:none;" >{{ customer_id }}</textarea>
        <textarea type="hidden" name="real_data" style="display:none;" >{{ real_data }}</textarea>

        <br style="clear:both"/>

        <p><b>* Những dòng in đỏ là những xe không thể tạm ngừng vì một trong các lý do sau: thời gian còn lại không đủ, xe không có hạn dùng, xe đang hủy hoặc đang tạm ngừng</b></p>
        <button type="submit" name="btn_OK"  style="font-size: 13px; color: white;background-color: rgb(207, 73, 68); width: 77px; height: 28px; border: 1px solid #ccc;">Xác nhận</button>
        <button name="btn_CANCEL" style="font-size: 13px; color: white;background-color: rgb(207, 73, 68); width: 77px; height: 28px; border: 1px solid #ccc;">Hủy bỏ</button>
    </form>
</div>

<script src="/static/jquery/jquery.js"></script>
<script src="/static/jquery/jquery.dataTables.min.js"></script>
<script>
    $(document).ready(function () {
        var table = $('#datatable').dataTable( {
            "oLanguage": {
                "sProcessing":   "Đang xử lý...",
                "sLengthMenu":   "Xem _MENU_ mục",
                "sZeroRecords":  "Không tìm thấy dòng nào phù hợp",
                "sInfo":         "Đang xem _START_ đến _END_ trong tổng số _TOTAL_ mục",
                "sInfoEmpty":    "Đang xem 0 đến 0 trong tổng số 0 mục",
                "sInfoFiltered": "(được lọc từ _MAX_ mục)",
                "sInfoPostFix":  "",
                "sSearch":       "",
                "sUrl":          "",
                "oPaginate": {
                "sFirst":    "Đầu ",
                 "sPrevious": "Trước ",
                 "sNext":     " Sau",
                 "sLast":     " Cuối"
                 }
            },
            "bFilter": false
        } );
    });
</script>

<link rel="stylesheet" href="/static/css/1.8.18/jquery-ui.css" type="text/css" media="all"/>
<script src="/static/jquery/jquery.min.js" type="text/javascript"></script>
<script src="/static/jquery/1.8.16/jquery-ui.min.js" type="text/javascript"></script>
<script>
    var $j = jQuery.noConflict();
    $j(function() {
        $j("#txt_user").autocomplete({
            source: "/admin/get_users",
            minLength: 2
            });
        });
</script>
{% endblock %}